<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EÄŸitsel Oyun PortalÄ± - GiriÅŸ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* ------------------ TEMEL STÄ°LLER ------------------ */
        body {
            font-family: 'Fredoka', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f7f9fc;
            background-image: linear-gradient(to right, rgba(199, 215, 237, 0.3) 1px, transparent 1px),
                              linear-gradient(to bottom, rgba(199, 215, 237, 0.3) 1px, transparent 1px);
            background-size: 20px 20px;
            padding: 20px;
        }

        .container {
            background-color: #ffffff;
            padding: 35px; 
            border-radius: 20px; 
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1), 0 5px 15px rgba(0, 0, 0, 0.05);
            width: 90%;
            max-width: 600px;
            text-align: center;
        }

        .screen { display: none; }
        .screen.active { display: block; }
        
        /* ------------------ OYUNCU LÄ°STESÄ° STÄ°LLERÄ° ------------------ */
        .player-list-wrapper {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out; 
        }
        .player-list-wrapper.visible {
            max-height: 300px;
            margin-bottom: 25px;
        }

        .player-list { max-height: 250px; overflow-y: auto; }
        .player-list button { 
            display: block;
            width: 90%; 
            margin: 10px auto; 
            padding: 14px; 
            color: white; 
            border: none; 
            border-radius: 10px; 
            cursor: pointer; 
            font-size: 19px;
            transition: background-color 0.3s, transform 0.1s; 
            font-weight: 600;
        }

        .player-list button { background-color: #4BB778; }
        .player-list button:hover { background-color: #3e9e67; transform: translateY(-2px); }

        #togglePlayerListBtn {
            background-color: #3498db !important;
            color: white;
            padding: 16px 35px;
            font-size: 1.3em;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(52, 152, 219, 0.4);
        }
        #togglePlayerListBtn:hover { background-color: #2980b9 !important; }
        #togglePlayerListBtn.clicked { background-color: #e74c3c !important; }

        /* ------------------ SKOR VE KAYDIRMA STÄ°LLERÄ° (YENÄ° EK) ------------------ */
        #highScores { margin-top: 35px; border-top: 2px solid #e0e0e0; padding-top: 20px; }
        #highScores h3 { color: #334455; }
        
        .score-list-scroll {
            max-height: 220px; /* KaydÄ±rma baÅŸlayacaÄŸÄ± yÃ¼kseklik */
            overflow-y: auto;  /* KaydÄ±rmayÄ± otomatik aÃ§ar */
            padding-right: 5px; 
        }

        .score-item { 
            display: flex;
            justify-content: space-between; 
            padding: 10px 15px; 
            margin-bottom: 5px;
            background-color: #fcfcfc;
            border-radius: 8px;
            border: 1px solid #eee;
            font-weight: 400;
        }
        
        /* ------------------ OYUN SEÃ‡Ä°M STÄ°LLERÄ° ------------------ */
        .game-button { 
            display: block;
            width: 90%; 
            margin: 10px auto; 
            padding: 14px; 
            color: white; 
            border: none; 
            border-radius: 10px; 
            cursor: pointer; 
            font-size: 19px;
            transition: background-color 0.3s, transform 0.1s; 
            font-weight: 600;
            background-color: #e67e22; /* Turuncu */
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(230, 126, 34, 0.4);
        }
        .game-button:hover {
            background-color: #d35400;
            transform: translateY(-2px);
        }
        
        /* Mobil Uyumlu */
        @media (max-width: 450px) {
            .container { padding: 15px 10px; }
            .player-list button, .game-button { font-size: 16px; padding: 12px; }
            #togglePlayerListBtn { font-size: 1.1em; padding: 12px 25px; }
            .score-item { padding: 8px 10px; font-size: 0.9em; }
        }
    </style>
</head>
<body>
    <div class="container">
        
        <div id="splashScreen" class="screen active">
            <h2>EÄŸitsel Oyun PortalÄ±</h2>
            <p style="font-size: 1.1em; color: #555;">Oyuna baÅŸlamak iÃ§in adÄ±nÄ±zÄ± seÃ§in ve bireysel ÅŸifrenizi girin.</p>

            <button id="togglePlayerListBtn" onclick="togglePlayerList()">AdÄ±nÄ±zÄ± SeÃ§in</button>
     
            <div class="player-list-wrapper" id="playerListWrapper">
                <div class="player-list" id="playerListContainer">
                    </div>
            </div>

            <button onclick="clearAllScoresWithPassword()" style="
                background-color: #e74c3c; 
                color: white;
                padding: 12px 25px;
                font-size: 1em;
                border: none;
                border-radius: 10px;
                cursor: pointer;
                margin-top: 20px;
                box-shadow: 0 3px 5px rgba(231, 76, 60, 0.3);
            ">TÃ¼m SkorlarÄ± Sil (YÃ¶netici)</button>
            
            <div id="highScores">
                </div>
        </div>

        <div id="gameSelectionScreen" class="screen">
            <h2 id="welcomeText"></h2>
            <p style="font-size: 1.1em; color: #555;">Hangi maceraya atÄ±lmak istersin?</p>
            
            <div id="gameList">
                <button class="game-button" data-game="toplama-oyunu/index.html">â• Eldesiz Toplama MacerasÄ±</button>
                <button class="game-button" data-game="carpma-oyunu/index.html" disabled style="background-color: #ccc; cursor: not-allowed; opacity: 0.7;">âŒ Ã‡arpma Oyunu (YakÄ±nda!)</button>
            </div>
            
            <button onclick="logout()" style="
                background-color: #3498db; 
                color: white;
                padding: 12px 25px;
                font-size: 1em;
                border: none;
                border-radius: 10px;
                cursor: pointer;
                margin-top: 30px;
            ">BaÅŸka Bir Hesapla GiriÅŸ Yap</button>
        </div>

    </div>

    <script>
        // ------------------ JAVASCRIPT KODLARI (MERKEZÄ° YÃ–NETÄ°M) ------------------
        
        // YÃ–NETÄ°CÄ° ÅÄ°FRESÄ°
        const ADMIN_PASSWORD = "ogretmen2024"; 

        // ################## Ã–ÄRENCÄ° ADLARI VE ÅÄ°FRELERÄ° ##################
        const STUDENT_PASSWORDS = {
            "AHMET EFE AYVAZ": "4910",
            "ALÄ° ARAS AYYILDIZ": "5335",
            "ALÄ° ASAF GÃœRBÃœZ": "4771",
            "ALYA DEMÄ°RAL": "2041",
            "ASEL LENA AYYILDIZ": "2441",
            "ASIM MÄ°RAÃ‡ KARA": "2766",
            "AYBÃœKE Ã–ZKAN": "4850",
            "BERAT ALÄ° AKDEMÄ°R": "2532",
            "BETÃœL SENA GÃœNGÃ–R": "2274",
            "DERÄ°N DURU Ã‡AL": "5010",
            "DÄ°DEM SOYLU": "4207",
            "EMÄ°R RÃœZGAR GÃ–LEÅ": "5822",
            "ESÄ°LA YÄ°ÄÄ°T": "2644",
            "EYMEN ARAS PULATKAN": "1722",
            "EYMEN YAYLACIK": "2425",
            "FATMA HÄ°RA ASLAN": "2310",
            "FEYZA EMÄ°NE ALTUN": "5142",
            "HAMZA KAÄAN Ã–ZTAÅ": "2486",
            "HATÄ°CE Ã‡ALÄ°MLÄ°": "1352",
            "HELÄ°N ADA": "2661",
            "HÃœSNE SERRA CEREN": "5303",
            "Ä°MRAN YAZICI": "2832",
            "MÄ°RAÃ‡ Ã–ZÃ‡ELEBÄ°": "3552",
            "MUSAB CÄ°HAT KILIÃ‡": "2841",
            "NÄ°SANUR FÄ°LÄ°Z": "1234",
            "Ã–MER ASAF GÃœNGÃ–R": "2274",
            "SAÄ°D HAMZA ASLAN": "2272",
            "SÄ°NAN BARAN": "4840",
            "TUANA TÃœRK DERÄ°N Ã‡ETÄ°N": "1961",
            "UMUT ARAS KUTLU": "2216",
            "YÄ°ÄÄ°T ALÄ° BENLÄ°": "2559",
            "YÄ°ÄÄ°T ASAF Ä°ÅSEVER": "4888",
            "YUSUF BERAT TANRIVERDÄ°": "4682",
            "YUSUF BOZDOÄAN": "4810",
            "YUSUF EYMEN Ã‡INAR": "5046",
            "ZEYNEB MERYEM TAHÄ°ROÄLU": "4422",
            "ZEYNEP AKSOY": "2414",
            "ZÃœMRA BELÄ°Z YILDIRIM": "4949"
        };
        // ###############################################################

        const STUDENT_NAMES = Object.keys(STUDENT_PASSWORDS);
        const INITIAL_PLAYERS = [...STUDENT_NAMES, "Ã–ÄŸretmen"];
        const generateUniqueId = () => Date.now().toString(36) + Math.random().toString(36).substring(2);

        let activePlayer = null; 
        
        // ------------------ LOCAL STORAGE YÃ–NETÄ°MÄ° ------------------
        
        function getHighScores() {
            try {
                // Sadece toplama oyununun skorlarÄ±nÄ± Ã§eker
                const scores = JSON.parse(localStorage.getItem('toplamaScores'));
                return Array.isArray(scores) ? scores : [];
            } catch (e) { return []; }
        }

        function clearAllScoresWithPassword() {
            const enteredPassword = prompt("TÃ¼m SkorlarÄ± Silmek Ä°Ã§in YÃ–NETÄ°CÄ° ÅŸifresini girin:");
            if (enteredPassword === ADMIN_PASSWORD) {
                // Sadece toplama skorlarÄ±nÄ± siliyoruz. Ä°leride diÄŸer oyunlar buraya eklenebilir.
                localStorage.removeItem('toplamaScores'); 
                renderHighScores();
                alert('Tebrikler! TÃ¼m Skorlar BaÅŸarÄ±yla SÄ±fÄ±rlandÄ±.');
            } else if (enteredPassword !== null) {
                alert('Hata! Girilen ÅŸifre yanlÄ±ÅŸ.');
            }
        }

        // ------------------ GÄ°RÄ°Å AKIÅI FONKSÄ°YONLARI ------------------

        function togglePlayerList() {
            document.getElementById('playerListWrapper').classList.toggle('visible');
            const btn = document.getElementById('togglePlayerListBtn');
            if (document.getElementById('playerListWrapper').classList.contains('visible')) {
                btn.textContent = 'Listeyi Gizle';
                btn.classList.add('clicked'); 
            } else {
                btn.textContent = 'AdÄ±nÄ±zÄ± SeÃ§in';
                btn.classList.remove('clicked'); 
            }
        }
        
        function checkPasswordAndLogin(player) {
            let requiredPassword = null;
            if (player === "Ã–ÄŸretmen") {
                requiredPassword = ADMIN_PASSWORD;
            } else if (STUDENT_PASSWORDS[player]) {
                requiredPassword = STUDENT_PASSWORDS[player];
            } else {
                alert('Hata: Oyuncu kaydÄ± bulunamadÄ±.');
                return; 
            }

            const enteredPassword = prompt(`${player} adÄ±yla devam etmek iÃ§in ÅŸifrenizi girin:`);
            if (enteredPassword === null) {
                return;
            }
            
            if (enteredPassword === requiredPassword) {
                activePlayer = player;
                showGameSelectionScreen();
            } else {
                alert('Hata: Girilen ÅŸifre yanlÄ±ÅŸ. LÃ¼tfen tekrar deneyin.');
            }
        }
        
        function showGameSelectionScreen() {
            document.getElementById('splashScreen').classList.remove('active');
            document.getElementById('gameSelectionScreen').classList.add('active');
            document.getElementById('welcomeText').textContent = `HoÅŸ geldin, ${activePlayer}!`;
        }

        function logout() {
            activePlayer = null;
            document.getElementById('gameSelectionScreen').classList.remove('active');
            document.getElementById('splashScreen').classList.add('active');
        }

        // Oyun SeÃ§imi YÃ¶nlendirme
        document.getElementById('gameSelectionScreen').addEventListener('click', (event) => {
            if (event.target.classList.contains('game-button') && !event.target.disabled) {
                const gamePath = event.target.getAttribute('data-game');
                // Oyuncu adÄ±nÄ± URL parametresi olarak ekleyerek yÃ¶nlendir
                window.location.href = `${gamePath}?player=${encodeURIComponent(activePlayer)}`;
            }
        });

        // ------------------ Ä°LK YÃœKLEME VE RENDER ------------------
        
        function renderPlayerList() {
            const playerListContainer = document.getElementById('playerListContainer');
            const players = [...new Set(INITIAL_PLAYERS)]; 
            
            playerListContainer.innerHTML = players.map(name => 
                `<button onclick="checkPasswordAndLogin('${name}')">${name}</button>`
            ).join('');
        }

        function renderHighScores() {
            const scores = getHighScores();
            
            const scoreHtml = scores.map((s, index) => {
                // Silme butonu mantÄ±ÄŸÄ± skorlarÄ± silmek iÃ§in oyuna yÃ¶nlendirme yapmayacaÄŸÄ± iÃ§in kaldÄ±rÄ±ldÄ±.
                // SkorlarÄ±n silinmesi sadece yÃ¶netici butonu ile toplu yapÄ±labilir.
                return `<div class="score-item">
                            <span>${index + 1}. ${s.player}</span>
                            <span>Puan: ${s.score}</span>
                        </div>`;
            }).join('');
            
            // YENÄ°: SkorlarÄ± kaydÄ±rÄ±labilir alana sarmalÄ±yoruz
            document.getElementById('highScores').innerHTML = `
                <h3>ğŸ† Eldesiz Toplama SkorlarÄ±</h3>
                <div class="score-list-scroll"> 
                    ${scoreHtml ||
                    '<p style="margin-top: 15px; color: #777;">HenÃ¼z skor yok. Ä°lk sen oyna!</p>'}
                </div>
            `;
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            renderPlayerList();
            renderHighScores();
        });
    </script>
</body>
</html>

